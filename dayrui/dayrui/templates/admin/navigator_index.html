{template nheader.html}
<script type="text/javascript">
$(function() {
    $(".select-cat").click(function(){
        var action = $(this).attr("action");
        var childs = $(this).attr("childs");
        var catid = $(this).attr("catid");
        var catids= new Array(); //定义一数组
        catids = childs.split(","); //字符分割
        if (action == 'close') {
            $.cookie('dr_{SITE_ID}_{$this->ci->router->class}_'+catid, null,{path:"/",expires: -1});
            $(this).attr("action", "open");
            $(this).html("[-]");
            for (i=0;i<catids.length ;i++ ) {
                if (catids[i] != catid) {
                    $(".dr_catid_"+catids[i]).show();
                }
            }
        } else {
            // 关闭状态存储cookie
            $.cookie('dr_{SITE_ID}_{$this->ci->router->class}_'+catid, 1);
            $(this).attr("action", "close");
            $(this).html("[+]");
            for (i=0;i<catids.length ;i++ ) {
                if (catids[i] != catid) {
                    $(".dr_catid_"+catids[i]).hide();
                }
            }
        }
    });
    $(".select-cat").each(function(){
        var childs = $(this).attr("childs");
        var catid = $(this).attr("catid");
        var cache = $.cookie('dr_{SITE_ID}_{$this->ci->router->class}_'+catid);
        if (cache) {
            $(this).attr("action", "close");
            $(this).html("[+]");
            var catids= new Array(); //定义一数组
            catids = childs.split(","); //字符分割
            for (i=0;i<catids.length ;i++ ) {
                if (catids[i] != catid) {
                    $(".dr_catid_"+catids[i]).hide();
                }
            }
        }
    });
});
</script>

<div class="portlet light bordered">
    <div class="portlet-body">
        <div class="table-scrollable v3table">
		<form action="" method="post" name="myform" id="myform">
		<input name="action" id="action" type="hidden" value="order" />
		<table class="table">
		<thead>
        <tr>
			<th width="20" align="right"></th>
			<th width="30" align="center">{fc_lang('排序')}</th>
			<th width="50" align="center">Id</th>
            <th align="left">{fc_lang('导航名称')}</th>
            <th align="center" width="80">{fc_lang('类型')}</th>
            <th style='text-align:center' width="99">{fc_lang('新窗口打开')}</th>
            <th style='text-align:center' width="99">{fc_lang('是否显示')}</th>
			<th align="left" class="dr_option">{if $this->ci->is_auth('admin/navigator/add')}<a title="{fc_lang('添加')}" href="{dr_url('navigator/add', array('type' => $type))}"> <i class="fa fa-plus"></i> {fc_lang('添加')}{/if}</th>
        </tr>
        </thead>
		<tbody>
		{$list}
        <tr class="mtable_bottom">
			<th align="right"><input name="dr_select" class="toggle md-check" type="checkbox" onClick="dr_selected()" /></th>
			<td colspan="8" align="left">
            {if $this->ci->is_auth('admin/navigator/del')}<button type="button" class="btn red btn-sm" value="" name="button" onClick="$('#action').val('del');return dr_confirm_set_all('{fc_lang('您确定要这样操作吗？')}')"> <i class="fa fa-trash"></i> {fc_lang('删除')}</button>&nbsp;{/if}
			{if $this->ci->is_auth('admin/navigator/edit')}<button type="button" class="btn green btn-sm" name="button" onclick="$('#action').val('order');return dr_confirm_set_all('{fc_lang('您确定要这样操作吗？')}')" > <i class="fa fa-edit"></i> {fc_lang('排序')}</button>
                &nbsp;<div class="onShow">{fc_lang('排序按从小到大排列，最大支持99')}</div>{/if}
			</td>
		</tr>
		</tbody>
		</table>
		</form>
	    </div>
	</div>
</div>
{template nfooter.html}